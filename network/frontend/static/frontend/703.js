"use strict";(self.webpackChunkfullstacknetwork=self.webpackChunkfullstacknetwork||[]).push([[703],{6562:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(885),o=n(7294),a=n(5295),i=n(8515),l=n(2643),s=n(9161),c=n(7109),u=n(6867),f=n(2658),m=n(6949),p=n(6111),d=n(3484),g=n(3727),h=n(2986),Z=n(1732),v=n(6914),w=n(6186),E=n(4776),y=n(7957),k=n(9571),b=n(9704);function S(e){var t=(0,o.useContext)(d.S).refresh,n=(0,b.v9)((function(e){return e.postsState.posts})),S=(0,b.v9)((function(e){return e.myInfoState})),I=(0,o.useState)(null),x=(0,r.Z)(I,2),C=x[0],L=x[1],A=(0,o.useState)(""),F=(0,r.Z)(A,2),T=F[0],D=F[1],O=(0,o.useState)(!1),P=(0,r.Z)(O,2),U=P[0],G=P[1],_=(0,o.useState)(!0),N=(0,r.Z)(_,2),j=N[0],q=N[1],z=(0,k.Ds)().enqueueSnackbar;(0,o.useEffect)((function(){e.post.UsersLikes.includes(S.isLogedIn&&S.myInfo.id)?L(!0):L(!1)}),[S.isLogedIn,n]);var M=function(){"main"===e.from?t():"following"===e.from?e.getFollowingPosts():e.GetUserPosts()};return o.createElement(a.Z,{style:{textAlign:"center",width:"auto",margin:"auto",marginTop:"2%"},sx:{maxWidth:550}},o.createElement(i.Z,{avatar:o.createElement(g.rU,{style:{textDecoration:"initial"},to:"/profile/".concat(e.post.writer)},o.createElement(c.Z,{sx:{bgcolor:m.Z[500]},"aria-label":"recipe"},e.post.writer.charAt(0).toUpperCase())),action:S.isLogedIn&&(S.myInfo.username===e.post.writer?o.createElement(u.Z,{onClick:function(){D(e.post.post),q(!j)}},o.createElement(y.Z,null)):""),title:e.post.writer,subheader:e.post.created_at}),o.createElement(l.Z,null,j?o.createElement(f.Z,{variant:"body2",color:"text.secondary"},e.post.post):o.createElement(o.Fragment,null,o.createElement(Z.Z,{id:"outlined-multiline-static",value:T,multiline:!0,rows:5,style:{width:"100%",marginTop:"1%"},onChange:function(e){D(e.target.value)}}),o.createElement(v.Z,{onClick:function(){var t,n;T.length>5?(t=T,n=e.post.id,h.h.patch("posts/".concat(n,"/"),{post:t},S.CONFIG).then((function(){return M()})),z("Post Edited!",{variant:"info"}),q(!0)):G(!0)}},"Save"),o.createElement(E.Z,{direction:"up",in:U,mountOnEnter:!0,unmountOnExit:!0},o.createElement(w.Z,{severity:"warning"},"you should at least type 5 letters")))),o.createElement(s.Z,{disableSpacing:!0},o.createElement(u.Z,{onClick:function(){var t;S.isLogedIn&&(L(!C),t=e.post.id,h.h.patch("posts/".concat(t,"/like/"),{},S.CONFIG).then((function(){return M()})))},style:{color:C?"red":"gray"},"aria-label":"add to favorites"},o.createElement(p.Z,null),0==e.post.likes?"":e.post.likes)))}},6703:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(907),o=n(181);var a=n(5861),i=n(885),l=n(7757),s=n.n(l),c=n(7294),u=(n(3484),n(2986)),f=n(6562),m=n(6492),p=n(9041),d=n(9704);const g=function(){var e=(0,d.v9)((function(e){return e.myInfoState.isLogedIn})),t=(0,d.v9)((function(e){return e.myInfoState.myInfo})),n=(0,c.useState)("loading"),l=(0,i.Z)(n,2),g=l[0],h=l[1],Z=(0,c.useState)(""),v=(0,i.Z)(Z,2),w=v[0],E=v[1],y=(0,c.useState)(1),k=(0,i.Z)(y,2),b=k[0],S=k[1];(0,c.useEffect)((0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I();case 1:case"end":return e.stop()}}),e)}))),[w]),(0,c.useEffect)((function(){e&&t.following.forEach((function(e){E((function(t){return[].concat(function(e){if(Array.isArray(e))return(0,r.Z)(e)}(n=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||(0,o.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e.following_user_id]);var n}))}))}),[t]);var I=(0,c.useCallback)((0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.h.get("posts/").then((function(e){return e.data}));case 2:t=e.sent,n=t.filter((function(e){return w.includes(e.writer)})),h(n);case 5:case"end":return e.stop()}}),e)}))),[w]),x=10*b,C=x-10,L=Math.ceil((null!==g&&"loading"!==g&&g.length)/10);return c.createElement("div",null,null!==g&&"loading"!==g&&g.sort((function(e,t){return new Date(e.id)-new Date(t.id)})).slice(C,x).map((function(e,t){return c.createElement(f.Z,{key:t,post:e,from:"following",getFollowingPosts:I})})),"loading"===g?c.createElement(p.Z,{sx:{marginTop:"10%"}}):c.createElement(m.Z,{size:"large",count:L,page:b,onChange:function(e,t){S(t),window.scrollTo({top:0,behavior:"smooth"})}}))}}}]);