"use strict";(self.webpackChunkfullstacknetwork=self.webpackChunkfullstacknetwork||[]).push([[138],{6562:(e,t,n)=>{n.d(t,{Z:()=>b});var o=n(885),a=n(7294),r=n(5295),l=n(8515),i=n(2643),s=n(9161),c=n(7109),u=n(6867),m=n(2658),f=n(6949),p=n(6111),d=n(3484),g=n(3727),h=n(2986),E=n(1732),Z=n(6914),w=n(6186),v=n(4776),k=n(7957),y=n(9571),S=n(9704);function b(e){var t=(0,a.useContext)(d.S).refresh,n=(0,S.v9)((function(e){return e.postsState.posts})),b=(0,S.v9)((function(e){return e.myInfoState})),C=(0,a.useState)(null),I=(0,o.Z)(C,2),x=I[0],L=I[1],F=(0,a.useState)(""),O=(0,o.Z)(F,2),U=O[0],G=O[1],P=(0,a.useState)(!1),T=(0,o.Z)(P,2),D=T[0],N=T[1],_=(0,a.useState)(!0),z=(0,o.Z)(_,2),A=z[0],q=z[1],B=(0,y.Ds)().enqueueSnackbar;(0,a.useEffect)((function(){e.post.UsersLikes.includes(b.isLogedIn&&b.myInfo.id)?L(!0):L(!1)}),[b.isLogedIn,n]);var M=function(){"main"===e.from?t():"following"===e.from?e.getFollowingPosts():e.GetUserPosts()};return a.createElement(r.Z,{style:{textAlign:"center",width:"auto",margin:"auto",marginTop:"2%"},sx:{maxWidth:550}},a.createElement(l.Z,{avatar:a.createElement(g.rU,{style:{textDecoration:"initial"},to:"/profile/".concat(e.post.writer)},a.createElement(c.Z,{sx:{bgcolor:f.Z[500]},"aria-label":"recipe"},e.post.writer.charAt(0).toUpperCase())),action:b.isLogedIn&&(b.myInfo.username===e.post.writer?a.createElement(u.Z,{onClick:function(){G(e.post.post),q(!A)}},a.createElement(k.Z,null)):""),title:e.post.writer,subheader:e.post.created_at}),a.createElement(i.Z,null,A?a.createElement(m.Z,{variant:"body2",color:"text.secondary"},e.post.post):a.createElement(a.Fragment,null,a.createElement(E.Z,{id:"outlined-multiline-static",value:U,multiline:!0,rows:5,style:{width:"100%",marginTop:"1%"},onChange:function(e){G(e.target.value)}}),a.createElement(Z.Z,{onClick:function(){var t,n;U.length>5?(t=U,n=e.post.id,h.h.patch("posts/".concat(n,"/"),{post:t},b.CONFIG).then((function(){return M()})),B("Post Edited!",{variant:"info"}),q(!0)):N(!0)}},"Save"),a.createElement(v.Z,{direction:"up",in:D,mountOnEnter:!0,unmountOnExit:!0},a.createElement(w.Z,{severity:"warning"},"you should at least type 5 letters")))),a.createElement(s.Z,{disableSpacing:!0},a.createElement(u.Z,{onClick:function(){var t;b.isLogedIn&&(L(!x),t=e.post.id,h.h.patch("posts/".concat(t,"/like/"),{},b.CONFIG).then((function(){return M()})))},style:{color:x?"red":"gray"},"aria-label":"add to favorites"},a.createElement(p.Z,null),0==e.post.likes?"":e.post.likes)))}},5138:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var o=n(5861),a=n(885),r=n(7757),l=n.n(r),i=n(7294),s=n(6914),c=n(3484),u=n(2986),m=n(6562),f=n(6492),p=n(9041),d=n(9062),g=n(6265),h=n(2658),E=n(9704);function Z(e){var t=e.match,n=(e.history,(0,i.useContext)(c.S).CONFIG),r=(0,E.v9)((function(e){return e.myInfoState})),Z=(0,i.useState)("loading"),w=(0,a.Z)(Z,2),v=w[0],k=w[1],y=(0,i.useState)("loading"),S=(0,a.Z)(y,2),b=S[0],C=S[1],I=(0,i.useState)(""),x=(0,a.Z)(I,2),L=x[0],F=x[1],O=(0,i.useState)(1),U=(0,a.Z)(O,2),G=U[0],P=U[1],T=(0,i.useState)(null),D=(0,a.Z)(T,2),N=D[0],_=D[1],z=(0,i.useState)(!1),A=(0,a.Z)(z,2),q=A[0],B=A[1];(0,i.useEffect)((function(){M(),W()}),[t.params.name]),(0,i.useEffect)((function(){r.isLogedIn&&(r.myInfo.username===t.params.name&&B(!0),r.myInfo.following.forEach((function(e){e.following_user_id===t.params.name&&F(!0)})))}),[r.myInfo,t.params.name]);var M=function(){u.h.get("user/".concat(t.params.name,"/")).then((function(e){k(e.data)}))},W=(0,i.useCallback)((0,o.Z)(l().mark((function e(){var n,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.h.get("posts/").then((function(e){return e.data}));case 2:n=e.sent,o=n.filter((function(e){return e.writer===t.params.name})),C(o);case 5:case"end":return e.stop()}}),e)}))),[t.params.name]),Y=10*G,j=Y-10,H=Math.ceil((null!==b&&"loading"!==b&&b.length)/10),J=Boolean(N),K=J?"simple-popover":void 0;return i.createElement("div",null,"loading"!==v?i.createElement(i.Fragment,null,i.createElement("h1",null,v&&v.username),i.createElement("h1",null,"followers :",v&&v.followers.length),i.createElement("h1",null,"following :",v&&v.following.length)):i.createElement(d.Z,null),!q&&i.createElement(s.Z,{"aria-describedby":K,onClick:function(e){r.isLogedIn?v&&"loading"!==v&&(function(e){u.h.patch("follow/".concat(e,"/"),{},n).then((function(){return M()}))}(v.id),F(!L)):_(e.currentTarget)},variant:"contained"},L?"Unfollow":"Follow"),i.createElement(g.ZP,{id:K,open:J,anchorEl:N,onClose:function(){_(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.createElement(h.Z,{sx:{p:2}},"You have to be Loged in to follow someone.")),i.createElement("br",null),null!==b&&"loading"!==b&&b.sort((function(e,t){return new Date(e.id)-new Date(t.id)})).slice(j,Y).map((function(e,t){return i.createElement(m.Z,{key:t,post:e,from:"user",GetUserPosts:W})})),"loading"===b?i.createElement(p.Z,{sx:{marginTop:"10%"}}):i.createElement(f.Z,{size:"large",count:H,page:G,onChange:function(e,t){P(t),window.scrollTo({top:0,behavior:"smooth"})}}))}}}]);