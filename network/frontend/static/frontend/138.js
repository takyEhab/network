"use strict";(self.webpackChunkfullstacknetwork=self.webpackChunkfullstacknetwork||[]).push([[138],{6562:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(885),o=n(7294),r=n(5295),l=n(8515),i=n(2643),s=n(9161),c=n(7109),u=n(6867),m=n(2658),f=n(6949),p=n(6111),d=n(3484),g=n(3727),h=n(2986),E=n(1732),Z=n(6914),w=n(6186),v=n(4776),k=n(7957),y=n(9571);function b(e){var t=(0,o.useContext)(d.S),n=t.state,b=t.refresh,C=t.CONFIG,S=(0,o.useState)(null),x=(0,a.Z)(S,2),I=x[0],L=x[1],F=(0,o.useState)(""),U=(0,a.Z)(F,2),O=U[0],P=U[1],T=o.useState(!1),D=(0,a.Z)(T,2),G=D[0],_=D[1],z=(0,o.useState)(!0),A=(0,a.Z)(z,2),N=A[0],q=A[1],B=(0,y.Ds)().enqueueSnackbar;(0,o.useEffect)((function(){e.post.UsersLikes.includes(n.isLogedIn&&n.myInfo.id)?L(!0):L(!1)}),[n.isLogedIn,n.posts]);var M=function(){"main"===e.from?b():"following"===e.from?e.getFollowingPosts():e.GetUserPosts()};return o.createElement(r.Z,{style:{textAlign:"center",width:"auto",margin:"auto",marginTop:"2%"},sx:{maxWidth:550}},o.createElement(l.Z,{avatar:o.createElement(g.rU,{style:{textDecoration:"initial"},to:"/profile/".concat(e.post.writer)},o.createElement(c.Z,{sx:{bgcolor:f.Z[500]},"aria-label":"recipe"},e.post.writer.charAt(0).toUpperCase())),action:n.isLogedIn&&(n.myInfo.username===e.post.writer?o.createElement(u.Z,{onClick:function(){P(e.post.post),q(!N)}},o.createElement(k.Z,null)):""),title:e.post.writer,subheader:e.post.created_at}),o.createElement(i.Z,null,N?o.createElement(m.Z,{variant:"body2",color:"text.secondary"},e.post.post):o.createElement(o.Fragment,null,o.createElement(E.Z,{id:"outlined-multiline-static",value:O,multiline:!0,rows:5,style:{width:"100%",marginTop:"1%"},onChange:function(e){P(e.target.value)}}),o.createElement(Z.Z,{onClick:function(){var t,n;O.length>5?(t=O,n=e.post.id,h.h.patch("posts/".concat(n,"/"),{post:t},C).then((function(){return M()})),B("Post Edited!",{variant:"info"}),q(!0)):_(!0)}},"Save"),o.createElement(v.Z,{direction:"up",in:G,mountOnEnter:!0,unmountOnExit:!0},o.createElement(w.Z,{severity:"warning"},"you should at least type 5 letters")))),o.createElement(s.Z,{disableSpacing:!0},o.createElement(u.Z,{onClick:function(){var t;n.isLogedIn&&(L(!I),t=e.post.id,h.h.patch("posts/".concat(t,"/like/"),{},C).then((function(){return M()})))},style:{color:I?"red":"gray"},"aria-label":"add to favorites"},o.createElement(p.Z,null),0==e.post.likes?"":e.post.likes)))}},5138:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var a=n(5861),o=n(885),r=n(7757),l=n.n(r),i=n(7294),s=n(6914),c=n(3484),u=n(2986),m=n(6562),f=n(6492),p=n(9041),d=n(9062),g=n(6265),h=n(2658);function E(e){var t=e.match,n=(e.history,(0,i.useContext)(c.S)),r=n.state,E=n.CONFIG,Z=(0,i.useState)("loading"),w=(0,o.Z)(Z,2),v=w[0],k=w[1],y=(0,i.useState)("loading"),b=(0,o.Z)(y,2),C=b[0],S=b[1],x=(0,i.useState)(""),I=(0,o.Z)(x,2),L=I[0],F=I[1],U=(0,i.useState)(1),O=(0,o.Z)(U,2),P=O[0],T=O[1],D=(0,i.useState)(null),G=(0,o.Z)(D,2),_=G[0],z=G[1],A=(0,i.useState)(!1),N=(0,o.Z)(A,2),q=N[0],B=N[1];(0,i.useEffect)((function(){M(),W()}),[t.params.name]),(0,i.useEffect)((function(){r.isLogedIn&&(r.myInfo.username===t.params.name&&B(!0),r.myInfo.following.forEach((function(e){e.following_user_id===t.params.name&&F(!0)})))}),[r.myInfo,t.params.name]);var M=function(){u.h.get("user/".concat(t.params.name,"/")).then((function(e){k(e.data)}))},W=(0,i.useCallback)((0,a.Z)(l().mark((function e(){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.h.get("posts/").then((function(e){return e.data}));case 2:n=e.sent,a=n.filter((function(e){return e.writer===t.params.name})),S(a);case 5:case"end":return e.stop()}}),e)}))),[t.params.name]),Y=10*P,j=Y-10,H=Math.ceil((null!==C&&"loading"!==C&&C.length)/10),J=Boolean(_),K=J?"simple-popover":void 0;return i.createElement("div",null,"loading"!==v?i.createElement(i.Fragment,null,i.createElement("h1",null,v&&v.username),i.createElement("h1",null,"followers :",v&&v.followers.length),i.createElement("h1",null,"following :",v&&v.following.length)):i.createElement(d.Z,null),!q&&i.createElement(s.Z,{"aria-describedby":K,onClick:function(e){r.isLogedIn?v&&"loading"!==v&&(function(e){u.h.patch("follow/".concat(e,"/"),{},E).then((function(){return M()}))}(v.id),F(!L)):z(e.currentTarget)},variant:"contained"},L?"Unfollow":"Follow"),i.createElement(g.ZP,{id:K,open:J,anchorEl:_,onClose:function(){z(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.createElement(h.Z,{sx:{p:2}},"You have to be Loged in to follow someone.")),i.createElement("br",null),null!==C&&"loading"!==C&&C.sort((function(e,t){return new Date(e.id)-new Date(t.id)})).slice(j,Y).map((function(e,t){return i.createElement(m.Z,{key:t,post:e,from:"user",GetUserPosts:W})})),"loading"===C?i.createElement(p.Z,{sx:{marginTop:"10%"}}):i.createElement(f.Z,{size:"large",count:H,page:P,onChange:function(e,t){T(t),window.scrollTo({top:0,behavior:"smooth"})}}))}}}]);